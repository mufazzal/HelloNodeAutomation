pipeline {
    agent { label 'slave-ec2-fleet' }

    parameters {
        string(name: 'image', defaultValue: 'helloNode:latest', description: 'Please provide image for deployment')
    }        
    environment {
        nameSpace = "hello-node"
    }
    stages {    

        stage('Fetcing KubeConfig') {
            steps {
                echo "copying kubeconfig from S3"
                sh """
                    aws s3 cp "s3://hello-node-repo-bucket/BareMetalK8sCluster/Master/kubeconfig" .
                    pwd
                    ls
                """
            }      
        }
        stage('Deployment') {
           
            steps {
                echo 'Creating Deployment in K8S'    
                

                echo 'Creating Deployment in K8S'
            }
        } 
        
    } 
}

